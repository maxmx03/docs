---
title: String
---
import { Tabs, TabItem } from '@astrojs/starlight/components'
import CodeLua from '@components/CodeLua.astro'
import CodeBash from '@components/CodeBash.astro'


Uma string em Lua é uma sequência de caracteres. Ela é frequentemente usada
para representar palavras, frases e textos em geral.

## Tamanho da String

Para obter o tamanho de uma string em Lua, você pode utilizar o operador de
comprimento `#` ou a função `string.len()`.

Neste exemplo, a variável hello contém a string `"Olá, mundo"`.
Usando o operador `#`, podemos obter o tamanho da string e armazená-lo na
variável length. Da mesma forma, a função `string.len()` também retorna o
tamanho da string. Ambos os valores são impressos no console usando a função
`print()`.

export const example1 = `
local hello = "Olá, mundo"
local length = #hello
local length2 = string.len(hello)

print(string.format("Tamanho da string: %s", length))
print(string.format("Tamanho da string: %s", length2))
`

export const exampleOutput1 = `
Tamanho da string: 11
Tamanho da string: 11
`

<Tabs>
  <TabItem label="editor">
    <CodeLua code={example1} mark={["#hello", "string.len(hello)"]} />
  </TabItem>
  <TabItem label="terminal">
    <CodeBash code={exampleOutput1 } />
  </TabItem>
</Tabs>


## Concatenação de strings e string.format()

Em Lua, a concatenação de strings é realizada utilizando o operador de
concatenação (`..`). Esse operador permite combinar duas ou mais strings
em uma única string.

export const example2 = `
local str = "Lua"
str = str .. " programming"
print(str)
`

<Tabs>
  <TabItem label="editor">
    <CodeLua code={example2} mark={`str .. " programming"`} />
  </TabItem>
  <TabItem label="terminal">
    <CodeBash code="Lua programming" />
  </TabItem>
</Tabs>

Além da concatenação, você também pode usar a função `string.format` para
formatar strings em Lua. Essa função permite combinar valores e strings
formatadas em uma única string, seguindo um padrão definido.

| Especificador | Descrição                                                  |
| ------------- | ---------------------------------------------------------- |
| `%s`          | Formata o argumento como uma string                        |
| `%d`          | Formata o argumento como um número decimal inteiro         |
| `%f`          | Formata o argumento como um número de ponto flutuante      |
| `%c`          | Formata o argumento como um caractere ASCII                |
| `%o`          | Formata o argumento como um número octal                   |
| `%x` ou `%X`  | Formata o argumento como um número hexadecimal             |
| `%%`          | Insere um caractere de porcentagem literal (`%`) na string |

export const example3 = `
local name = "Alice"
local age = 25
local message = string.format("Olá, meu nome é %s e eu tenho %d anos.", name, age)
print(message)
`

<Tabs>
  <TabItem label="editor">
    <CodeLua code={example3} mark={["%s", "%d"]} />
  </TabItem>
  <TabItem label="terminal">
    <CodeBash code="Olá, meu nome é Alice e eu tenho 25 anos." />
  </TabItem>
</Tabs>

## Coerção de Strings

Em Lua, a coerção de strings é o processo de converter outros tipos de dados
em strings. Isso pode ser útil em situações em que você precisa representar um
valor não string como uma string.

Existem várias maneiras de realizar a coerção de strings em Lua:

### Concatenação Implícita

Uma forma comum de coerção de strings é através
da concatenação implícita.
Quando você usa o operador de concatenação (`..`) para combinar uma string com
outro tipo de dado, Lua automaticamente converte o valor para uma string.

export const example4 = `
    local number = 42
    local str = "O número é: " .. number
    print(str)
`

<Tabs>
  <TabItem label="editor">
    <CodeLua code={example4} />
  </TabItem>
  <TabItem label="terminal">
    <CodeBash code="O número é: 42" />
  </TabItem>
</Tabs>

Nesse exemplo, o valor da variável number é implicitamente convertido para uma
string durante a concatenação com a string `"O número é: "`. O resultado é a
string final `"O número é: 42"`.

#### Função tostring

Outra forma de realizar a coerção de strings é utilizando
a função `tostring()`. Essa função converte explicitamente um valor para sua
representação em string.

export const example5 = `
local boolean = true
local str = "O valor booleano é: " .. tostring(boolean)
print(str)
`

<Tabs>
  <TabItem label="editor">
    <CodeLua code={example5} mark="tostring(boolean)" />
  </TabItem>
  <TabItem label="terminal">
    <CodeBash code="O valor booleano é: true" />
  </TabItem>
</Tabs>


## Caracteres de Escape

Em Lua, os caracteres de escape são usados para representar caracteres
especiais dentro de uma string. Eles permitem que você inclua caracteres que,
de outra forma, teriam um significado especial na linguagem.

Aqui estão alguns exemplos de caracteres de escape comumente usados em Lua:

- \n - Nova linha
- \t - Tabulação
- \" - Aspas duplas
- \' - Aspas simples
- \\ - Barra invertida

export const example6 = `
local message = 'Ele disse "tchau" e foi embora'
print(message)
`

<Tabs>
  <TabItem label="editor">
    <CodeLua code={example6} />
  </TabItem>
  <TabItem label="terminal">
    <CodeBash code={`Ele disse "tchau" e foi embora`} />
  </TabItem>
</Tabs>


Nesse exemplo, as aspas duplas dentro da string são precedidas por uma barra
invertida \ para que sejam tratadas como parte do texto, e não como o fim da
string.

Você também pode usar aspas duplas em vez de aspas simples para evitar a
necessidade de escapar as aspas dentro da string

A saída será a mesma:

export const example7 = `
local message = "Ele disse \\"tchau\\" e foi embora"
print(message)
`

<Tabs>
  <TabItem label="editor">
    <CodeLua code={example7} mark="\" />
  </TabItem>
  <TabItem label="terminal">
    <CodeBash code={`Ele disse "tchau" e foi embora`} />
  </TabItem>
</Tabs>
